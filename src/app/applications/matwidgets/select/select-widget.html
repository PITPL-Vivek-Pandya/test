<div class="row">
    <div class="col-12">
        <mat-form-field>
            <mat-select [multiple]="schema.type===typeArray" [placeholder]="composePlaceholder()"
                [formControl]="control" [required]="(formProperty|isRequired) || schema.minItems > 0" [attr.name]="name"
                [attr.id]="id" [disabled]="schema.readOnly" [disableControl]="schema.readOnly">

                <mat-option *ngIf="schema.widget.isSearchable">
                    <ngx-mat-select-search [formControl]="searchCtrl" placeholderLabel="Search"
                        noEntriesFoundLabel="No matching item found">
                    </ngx-mat-select-search>
                </mat-option>

                <mat-option *ngIf="!((formProperty|isRequired) || schema.type===typeArray)" value="">
                    No item selected
                </mat-option>

                <ng-container *ngFor="let option of filteredList | async">
                    <div class="custom-divider" *ngIf="option.enum[0] === 0"></div>

                    <mat-option *ngIf="option.hasOwnProperty('includeInList') ? option.includeInList : true"
                        [value]="option.enum[0]" [disabled]="option.readOnly">
                        {{option.description}}
                    </mat-option>
                </ng-container>
            </mat-select>
            <mat-hint *ngIf="schema.description">{{schema.description}}</mat-hint>

            <mat-error *ngIf="schema.type===typeArray"
                [hidden]="!(schema.minItems > formProperty?.value?.length)">
                Please select a minimum of {{schema.minItems}} items
            </mat-error>
            <mat-error *ngIf="schema.type===typeArray && schema.hasOwnProperty('maxItems')"
                [hidden]="!(formProperty?.value?.length > schema.maxItems)">
                Please select a maximum of {{schema.maxItems}} items
            </mat-error>
        </mat-form-field>

        <input *ngIf="schema.readOnly" [attr.name]="name" type="hidden" [formControl]="control">
    </div>
</div>